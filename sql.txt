-- 1️⃣ Criar schema
CREATE SCHEMA IF NOT EXISTS engProj;

-- 2️⃣ Tabela de Refeições
CREATE TABLE engProj.refeicoes (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(100) NOT NULL
);

-- 3️⃣ Tabela Nutricional (ingredientes de cada refeição)
CREATE TABLE engProj.nutricional (
    id SERIAL PRIMARY KEY,
    id_refeicao INT REFERENCES engProj.refeicoes(id) ON DELETE CASCADE,
    ingredientes VARCHAR(255) NOT NULL
);

-- 4️⃣ Tabela de Estoque
CREATE TABLE engProj.stock (
    id SERIAL PRIMARY KEY,
    ingrediente VARCHAR(100) NOT NULL,
    quantidade INT NOT NULL
);

-- 5️⃣ Tabela de Pedidos
CREATE TABLE engProj.orders (
    id SERIAL PRIMARY KEY,
    id_refeicao INT REFERENCES engProj.refeicoes(id) ON DELETE CASCADE,
    status VARCHAR(20) DEFAULT 'ativo'
);

-- 6️⃣ Tabela de Feedback
CREATE TABLE engProj.feedback (
    id SERIAL PRIMARY KEY,
    id_refeicao INT REFERENCES engProj.refeicoes(id) ON DELETE CASCADE,
    comentario TEXT NOT NULL
);

-- 7️⃣ Inserts de exemplo: Refeições
INSERT INTO engProj.refeicoes (nome) VALUES
('Arroz com Frango'),
('Lasanha Bolonhesa'),
('Risoto de Cogumelos');

-- 8️⃣ Inserts de exemplo: Ingredientes para cada refeição
INSERT INTO engProj.nutricional (id_refeicao, ingredientes) VALUES
(1, 'arroz, frango, sal'),
(2, 'massa, molho, carne, queijo'),
(3, 'arroz, cogumelos, creme de leite, queijo');

-- 9️⃣ Inserts de exemplo: Estoque
INSERT INTO engProj.stock (ingrediente, quantidade) VALUES
('arroz', 500),
('frango', 300),
('sal', 50),
('massa', 200),
('molho', 100),
('carne', 250),
('queijo', 150),
('cogumelos', 100),
('creme de leite', 80);

-- 10️⃣ Inserts de exemplo: Pedidos
INSERT INTO engProj.orders (id_refeicao, status) VALUES
(1, 'ativo'),
(2, 'ativo');

-- 11️⃣ Inserts de exemplo: Feedback
INSERT INTO engProj.feedback (id_refeicao, comentario) VALUES
(1, 'Muito saboroso!'),
(2, 'Gostei da lasanha, mas podia ter mais queijo.');
